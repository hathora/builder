<html>
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.1/socket.io.js"></script>
    <script src="/static/js/client.js"></script>
  </head>
  <body>
    <script>
      function init(name) {
        return fetch("/register", {
          method: "POST",
          body: JSON.stringify({ playerName: name }),
        })
          .then(res => res.json())
          .then(({ userId }) => fetch("/new?userId=" + userId, { method: "post" }))
          .then(res => res.json());
      }

      function connect(stateId, userId) {
        const socket = io.connect("http://localhost:3000", {
          query: { stateId, userId },
        });
        socket.on("connect", () => {
          console.log("connected");
        });
        return socket;
      }
    </script>
  </body>
</html>
